@page "/students/edit/{StudentId:int}"
@inject StudentCourseApp.Services.StudentService StudentService
@inject NavigationManager Navigation

<h3>Edit Student</h3>

<div class="card p-3 shadow-sm" style="max-width:400px">
    @if (student == null)
    {
        <p><em>Loading...</em></p>
    }
    else
    {
        <div class="mb-3">
            <label class="form-label">Name</label>
            <input class="form-control" @bind="student.Name" />
        </div>
        <button class="btn btn-primary me-2" @onclick="Save">Save</button>
        <button class="btn btn-secondary" @onclick="Cancel">Cancel</button>
    }
</div>

@code {
    [Parameter] public int StudentId { get; set; }
    private StudentCourseApp.Models.Student student;

    protected override async Task OnInitializedAsync()
    {
        student = await StudentService.GetById(StudentId);
    }

    private async Task Save()
    {
        await StudentService.Update(student);
        Navigation.NavigateTo("/students");
    }

    private void Cancel() => Navigation.NavigateTo("/students");
}
